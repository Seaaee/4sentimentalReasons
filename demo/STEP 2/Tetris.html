<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0"
    >
    <meta
        http-equiv="X-UA-Compatible"
        content="ie=edge"
    >
    <title>俄罗斯方块</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%
        }

        ul,
        li {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        body {
            color: rgb(36, 34, 34);
            font-size: 12px;
            display: flex;
            justify-content: center;
            background: #f6f6f6
        }

        #play_area,
        #play_menu {
            margin-top: 100px;
        }

        #play_area {
            display: flex;
            width: 300px;
            height: 480px;
            border-radius: 2px;
            box-shadow: 0 0 8px #000;
            background-image:linear-gradient(transparent 0,rgba(6, 6, 6, 0.744) 1px),
                             linear-gradient(90deg,transparent 0,rgba(6, 6, 6, 0.744) 1px);
            background-size: 20px 20px
        }

        #play_area .play_cell{
            width: 19px;
            height: 19px;
            border: 1px solid transparent;
            background: #444;
        }
        #play_area .active {
            position: absolute;
        }


        #play_menu {
            margin-left: 80px;
            padding-top: 10px;
            font-size: 1rem;
        }

        #play_menu #play_nextType {
            width: 60px;
            height: 60px;
        }

        #play_menu #play_nextType .play_cell {
            width: 14px;
            height: 14px;
        }

        #play_menu #play_nextType .play_cell,
        #play_area .play_cell {
            border: 1px solid #eee;
            margin: 0 -1px -1px 0;
        }

        button {
            background: #fefefe;
            border: 1px solid #ccc;
            border-radius: 2px;
            outline: none;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease-in;
        }

        button:hover {
            animation: rainbow 0.6s ease-in infinite alternate;
        }

        @keyframes rainbow {
            0% {
                background: powderblue
            }

            50% {
                background: rgb(233, 250, 248)
            }

            100% {
                background: rgb(255, 165, 195);
            }
        }

        button .acc {
            background: #666;
            color: #eee
        }
        button .acc:hover{
            background: #333
        } 
        
        #play_btn_start {
            height: 70px;
            width: 160px;
            margin: 40px 10px 0;
            font-size: 1.3rem;
            color: rgb(36, 61, 88);
            font-weight: bolder;
        }

        #play_menu ul {
            display: flex;
            margin-top: 20px;
            width: 180px;
            justify-content: space-evenly
        }

        #play_menu ul li {
            width: 50px;
        }

        #play_menu ul li button {
            height: 50px;
            border-radius: 50%
        }

        #play_score {
            width: 180px;
            height: 160px;
            font-size: 8rem;
            line-height: 160px;
            text-align: center;
            margin-top: 20px;
            font-weight: bold;
            font-family: Impact, Haettenschweiler, 'Arial Narrow Bold';
        }

    </style>
</head>

<body>
    <main
        class='wrap'
        id='play_area'
    >
    </main>
    <nav id='play_menu'>
        <p>下一个：</p>
        <div id="play_nextType"></div>
        <button
            id="play_btn_start"
            class='play_btn'
        >开始
        </button>
        <ul>
            <li><button>慢</button></li>
            <li><button>还行</button></li>
            <li><button>快</button></li>
        </ul>
        <div id='play_score'>0</div>
    </nav>
    <script src="Jq/jquery-1.6.2.min.js"></script>
    <script>
        'use strict';

        class Tetris{
            constructor(){
                this.playArea=document.getElementById('play_area')
                this.activeCell=document.getElementsByClassName('active');
                this.playSize={
                    width:300,
                    height:480,
                    left:this.getDistance(true),
                    top:this.getDistance(false),
                }
            }
            getDistance(r){
                return r?this.playArea.offsetLeft:this.playArea.offsetTop
            }


            /**
                移动 move()  20px
                判断是否可以移动
            */
            move(){
                document.onkeydown=function(e){
                    let left=parseInt(this.activeCell.style.left)?parseInt(this.activeCell.style.left):0,
                        top=(this.activeCell.style.top)?parseInt(this.activeCell.style.top):0;

                    const key=e.keyCode;
                    switch(key){
                        case 37:
                            if(left+20<this.playSize.width+this.playSize.left)
                            this.activeCell.style.left=`${left-20}px`;
                            break;
                        case 38:
                            // 变形
                            break;
                        case 39:
                            if(left+20>=this.playSize.width+this.playSize.left){
                                this.activeCell.style.left=`${left+20}px`;
                            }
                            break;
                        case 40: 
                            if(top+20>=this.playSize.height+this.playSize.top){
                                this.activeCell.style.top=`${top+20}px`;
                            }
                            break;
                        default:
                            break;
                    }
                }
            }

            init(){
                let activeModel=document.createElement('div')
                activeModel.className='play_cell active'
                activeModel.style.top=`${this.playSize.top}px`
                activeModel.style.left=`${this.playSize.left+(parseInt(this.playSize.width/20)-1)*10}px`
                this.playArea.appendChild(activeModel)
            }
        }
        window.onload=()=>{
            let go=new Tetris();
            go.init()
        }
    </script>
</body>

</html>
